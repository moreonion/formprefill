var e={getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,r,i,o,s){if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;var n="";if(r)switch(r.constructor){case Number:n=Infinity===r?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:n="; expires="+r;break;case Date:n="; expires="+r.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+n+(o?"; domain="+o:"")+(i?"; path="+i:"")+(s?"; secure":""),!0},removeItem:function(e,t,r){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/),t=e.length,r=0;r<t;r++)e[r]=decodeURIComponent(e[r]);return e}};class t{constructor(e,t,r){this.pfx=e,this.domain=t,this.maxAge=r}setItems(t,r){return t.forEach(t=>{e.setItem(this.pfx+":"+t,JSON.stringify(r),this.maxAge,"/",this.domain,!0)}),Promise.resolve(!0)}removeItems(t){return t.forEach(t=>{e.removeItem(self.pfx+":"+t,"/",self.domain)}),Promise.resolve(!0)}getFirst(t){return new Promise(function(r,i){t.forEach(t=>{var i=e.getItem(this.pfx+":"+t);null!==i&&r(JSON.parse(i))}),i(new Error("keys not found in cookies: "+t.join(", ")))})}}class r{constructor(e,t){this.storage=e,this.pfx=t}browserSupport(){var e="modernizr";try{return this.storage.setItem(e,e),this.storage.removeItem(e),!0}catch(e){return!1}}setItems(e,t){return e.forEach(e=>{this.storage.setItem(this.pfx+":"+e,JSON.stringify(t))}),Promise.resolve(!0)}removeItems(e){return e.forEach(e=>{this.storage.removeItem(this.pfx+":"+e)}),Promise.resolve(!0)}getFirst(e){return new Promise((t,r)=>{e.forEach(e=>{var r=this.storage.getItem(this.pfx+":"+e);null!==r&&t(JSON.parse(r))}),r(new Error("keys not found in storage: "+e.join(", ")))})}}const i={prefix:"formPrefill",storageKeys:function(){return{read:"key",write:"key"}},map:{},exclude:"[data-form-prefill-exclude]",include:"[data-form-prefill-include]",stringPrefix:"s",listPrefix:"l",stores:[],useSessionStore:!0,useLocalStore:!1,useCookies:!1,cookieDomain:"",cookieMaxAge:Infinity},o=jQuery;function s(e){if(["sessionStorage","localStorage"].indexOf(e)<0)return null;var t;try{t=window[e]}catch(e){return null}return t}class n{static fromSettings(e){e=o.extend({},i,e);const n=o.extend(!0,[],e.stores);if(e.useSessionStore){const t=s("sessionStorage");if(t){const i=new r(t,e.prefix);i.browserSupport()&&n.push(i)}}if(e.useLocalStore){const t=s("localStorage");if(t){const i=new r(t,e.prefix);i.browserSupport()&&n.push(i)}}return e.useCookies&&n.push(new t(e.prefix,e.cookieDomain,e.cookieMaxAge)),new this(n,e.stringPrefix,e.listPrefix)}constructor(e,t,r){this.stores=e,this.stringPrefix=t,this.listPrefix=r}setItems(e,t){const r=[];return this.stores.forEach(function(i,o){r.push(i.setItems(e,t))}),Promise.all(r)}removeItems(e){const t=[];return this.stores.forEach(function(r,i){t.push(r.removeItems(e))}),Promise.all(t)}getFirst(e){var t=0;return new Promise((r,i)=>{this.stores.forEach((o,s)=>{o.getFirst(e).then(e=>{r(e)},e=>{++t===this.stores.length&&i(e)})})})}prefix(e,t){return void 0===t&&(t=!1),function(e,t){for(var r=0,i=t.length;r<i;r++)t[r]=e+":"+t[r]}(t?this.listPrefix:this.stringPrefix,e),e}setValuesMap(e){var t=[];return Object.keys(e).forEach(r=>{const i=e[r];t.push(this.setItems(this.prefix([r]),i[i.length-1])),t.push(this.setItems(this.prefix([r],!0),i))}),Promise.all(t)}}!function(e){var t={WebStorage:r,Stores:n};i.storageKeys=t.storageKeys=function(e){var t=e.attr("type"),r=e.attr("name");if(r){var i=r.match(/\[[^\]]+\]/g)||[];if(!i.length||"checkbox"===t&&i.length<2)return{read:r,write:r};var o=("checkbox"===t?i[i.length-2]:i[i.length-1]).match(/\[([^\]]+)\]/)[1];return{read:o,write:o}}};var o=t.parseAttribute=function(t){return e.isArray(t)?t:"string"==typeof t&&t?t.split(" "):[]},s=t.serializeAttribute=function(t){return"string"==typeof t?t:e.isArray(t)?t.join(" "):""},a=t.deduplicateSets=function(t){var r=[];return t.filter(function(){var t=e(this).attr("data-form-prefill-write"),i=e(this).attr("type");return"checkbox"!==i&&"radio"!==i||-1===r.indexOf(t)&&(r.push(t),!0)})},l=t.readUrlVars=function(t,r){if(!(t=t||window.location.hash.substr(1)))return"";var i,o,s,n,a={},l=[];n=t.split(";");for(var f=0;f<n.length;f++){var c=n[f];if("p:"===c.substr(0,2))for(var u=c.substr(2).split("&"),h=0;h<u.length;h++)s=u[h].indexOf("="),"p:"===(i=u[h].substring(0,s)).substr(0,2)&&(i=i.substr(2)),o=decodeURIComponent(u[h].substring(s+1)),i in a||(a[i]=[]),a[i].push(o);else l.push(c)}return r.setValuesMap(a).finally(function(){e(document).trigger("hash-values-stored.form-prefill")}),l.join(";")},f=t.Api=function(t,r,n){n=n||e.extend({},i),this.$element=t,this.stores=r;var a=t.attr("type");if(this.initialValue="radio"===a||"checkbox"===a?t[0].checked:t.val(),void 0!==t.attr("data-form-prefill-keys")&&(t.attr("data-form-prefill-read",t.attr("data-form-prefill-keys")),t.attr("data-form-prefill-write",s(o(t.attr("data-form-prefill-keys")).sort()))),void 0===t.attr("data-form-prefill-read")&&void 0===t.attr("data-form-prefill-write")){var l=n.storageKeys(t);l&&void 0!==l.read&&t.attr("data-form-prefill-read",s(l.read)),l&&void 0!==l.write&&t.attr("data-form-prefill-write",s(o(l.write).sort()))}if(!e.isEmptyObject(n.map)){for(var f=o(t.attr("data-form-prefill-read")),c=[],u=0,h=f.length;u<h;u++)f[u]in n.map&&(c=c.concat(n.map[f[u]]));t.attr("data-form-prefill-read",s(f.concat(c)))}};f.prototype.read=function(){var e=o(this.$element.attr("data-form-prefill-read"));return e.length?(this.stores.prefix(e,this.isList()),this.stores.getFirst(e).then(e=>{this.prefill(e)})):Promise.reject(new Error("Donâ€™t know which keys to read from."))},f.prototype.write=function(e){var t=o(this.$element.attr("data-form-prefill-write"));return t.length?(this.stores.prefix(t,this.isList()),e&&!0===e.delete?this.stores.removeItems(t):this.stores.setItems(t,this.getVal())):Promise.reject(new Error("No idea which keys to write to."))},f.prototype.prefill=function(e){this.$element.val(e).trigger("change")},f.prototype.getVal=function(){var e=this.$element.attr("type");if("radio"===e||"checkbox"===e){var t="",r=this.$element.attr("data-form-prefill-write");r&&(t+='[data-form-prefill-write="'+r+'"]');var i=this.$element.closest("form").find(t),o=[];return i.each(function(){this.checked&&o.push(this.value)}),o}return this.$element.val()},f.prototype.isList=function(){var e=this.$element.attr("type");return"checkbox"===e||"radio"===e||this.$element.is("select[multiple]")||this.$element.is(".form-prefill-list")},e(document).on("form-prefill:stores-initialized",function(t,r,i){var o=window.location.hash.substr(1);if(o){var s=l(o,r);s!==o&&(window.location.hash="#"+s)}e(i).trigger("form-prefill:stores-filled",[r])}),e.fn.formPrefill=function(r){if("privates"===r)return t;var o=e.extend(i,r),s=t.stores=n.fromSettings(o);return e(document).trigger("form-prefill:stores-initialized",[s,this]),this.each(function(){var t=e(this),r=t.find("input, select, textarea, .form-prefill, .form-prefill-list").not(function(t,r){if("file"===e(r).attr("type"))return!0;var i=e(r).closest(o.exclude),s=e(r).closest(o.include);return i.length>0&&(s.length<=0||e.contains(s.get(),i.get()))});t.data("formPrefill",{writeAll:function(){var t=a(r);const i=[];return t.each(function(){i.push(e(this).data("formPrefill").write())}),Promise.all(i)},removeAll:function(i){i=i||{resetFields:!0};var o=a(r);const s=[];return o.each(function(){s.push(e(this).data("formPrefill").write({delete:!0}))}),Promise.all(s).then(function(){i.resetFields&&r.each(function(){var t=e(this),r=t.data("formPrefill"),i=t.attr("type");"radio"===i||"checkbox"===i?(t[0].checked=r.initialValue,t.trigger("change")):t.val(r.initialValue).trigger("change")}),t.trigger("form-prefill:cleared")})},readAll:function(){r.each(function(){var t=e(this);t.data("formPrefill").read().then(function(){t.trigger("form-prefill:prefilled")},function(e){t.trigger("form-prefill:failed",e)})})}}),r.each(function(){var t=e(this),r=new f(t,s,o);t.data("formPrefill",r)}),r.on("change.form-prefill",function(){e(this).data("formPrefill").write().then(function(){},function(){})}),t.on("form-prefill:stores-filled",function(){t.data("formPrefill").readAll()}),t.data("formPrefill").readAll()})}}(jQuery);
//# sourceMappingURL=jquery.formprefill.cjs.map
