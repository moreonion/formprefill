<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>formprefill example</title>
  </head>
  <body>
    <form>
      <input type="text" data-form-prefill-keys="first_name"><br>
      <input value="one" data-form-prefill-keys="foo" type="checkbox"><input checked value="two" data-form-prefill-keys="foo" type="checkbox"><input checked value="three" data-form-prefill-keys="foo" type="checkbox"><br>
      <select multiple name="myform[personal_data][age]"><option value="1">one</option><option value="2">two</option><option value="3">three</option></select><br>
      <input type="text">
    </form>

    <button id="clear">Clear stores</button>
    <script type="module">
      import { formPrefill } from "./dist/formprefill.modern.js"

      const form = document.querySelector('form')
      const api = formPrefill(form)
      document.querySelector('#clear').addEventListener('click', () => api.removeAll())
      form.addEventListener('form-prefill:prefilled', (event) => {
        console.log('form-prefill:prefilled', event.target)
      })
      form.addEventListener('form-prefill:failed', (event) => {
        console.log('form-prefill:failed', event.target)
      })
      form.addEventListener('form-prefill:cleared', (event) => {
        console.log('form-prefill:cleared', event.target)
      })
    </script>
  </body>
</html>
